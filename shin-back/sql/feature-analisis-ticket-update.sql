/*
*Tabla para almacenar valores o llaves de conmunicacion, de momento solo para las push notificactions
*/
CREATE TABLE `ShinShin`.`config` (
  `key_name` VARCHAR(45) NOT NULL,
  `key_value` VARCHAR(45) NULL,
  `key_data` LONGTEXT NULL,
  PRIMARY KEY (`key_name`));

LOCK TABLES `config` WRITE;
/*!40000 ALTER TABLE `config` DISABLE KEYS */;
INSERT INTO `config` VALUES ('FCM_KEY','FCM_KEY_FILE','ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAic2hpbmdzaGluZy02OWMxZiIsCiAgInByaXZhdGVfa2V5X2lkIjogImMwYTcwYzJjY2NmZDFjMDQ5NDYwZDI4MzRmNmJiZTBjMjQyNWViZDEiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRREhBVlhMeG1OaVVXMzlcbjJtUElZQmt2eFV0UlExK2lhdHhWWlRoQ1RVMzhiOGVHN1FQUHVhYVkrNE1Zai80N2l5V3A4eVZjcE43M2d5VC9cbkhuUjNCRTFESDBEQ0QwVGxxbHlRVjJHNzR3OTFoWGFJNUF3WUNqTjg3VG9QSTZaRnVlVUZ2Rzk4SDV5VWNnMXlcbnBsVEhtS3VoZkxhYzlvaXpJeTZNYmpyR2tYTS9WbExxaUgzbGcxWWk1R1hJYXBwN2FLb2N1ZWZTRVpOVDY1ZjlcbmlkanNDY20rTG9sS1ViTXV6cmxwZVJDdlM3N1JoNXR4Y1N6NFZhamV4K3VJL2xHUjdRZGFKYXliMnVEN1dPNTFcbnJ6UHduOFdEaUZrN2FNcC9oTnoyY002TEpGSGc3Wk9UR1R1TnhVa01DMUs2cHBPUXVLSWNickVUalhoYjZTM0Zcbkszak42Z2J6QWdNQkFBRUNnZ0VBQWZwSFJyVkpsR2xEbkNLa2QzKzcxek5EY241TERia21iTk5tUWQ3OThQdVFcbmlWVzU3OVBSeFFUYi9mSVJoeVk5MmtyeFNvbXdWaUVSOFRIMWtnMDM1SHh4YytEU3JwbWJQaXRtL29iYy9jQnJcbjdyWlVVUUtPcUNXWWhXVzFjTitwb1NIMnNSZUVlVU40VXdjMkllZGZONDZldVdSUlBYVmJubG52T1ppRlRJa2FcbnZGUXFhcVZQbm1lWW1WWDE0ekk3MCtvM251MG9oWXZVWU93TUJ4VkNHRUV5dDdTUms3Ry9CbXZzYUhzTk1Za3lcbjJ5ZTZySERDL2VqZHFrczhtZTNSQWRmKy9qc1RyUDkwQ2FLVHcwRzd2Sk9LUXI1SlBQcmI2bmlGTGRYeVdDNWFcbkF3bXFld3o5c3J3WlpWbjIwNUZFUGcrV0dJZGtNNVM1Y0V1ZFFjZTBTUUtCZ1FEbCtNTjRUMnB1bXV0Qis4b3pcbnVvRGtqR29IUDAyc1c5UEE5cTBxTHFyVkVTdk5FbzVPZ3A1TkVjY0I5UmRtMytUNHhhQjZiK1N6OWd2K3FoTitcblF4bldxa3RqaCtXN1BwSlppdXhrSlQrZVJsQmdualhDYWE0OEI5akYyd1FXTXdPclowMkRkZDRkZHhWandTN2RcbnNubldma0h1UkJWdGZxcHhrSW5UbitzQ1R3S0JnUURkaDFmSzdMeFJKMXpBMURZOXdiTTBFZVVJWXAzdmM3Y3NcbnMzbjhaMmF3N0MzNzBoSVFnanA0OTVVWDhpMHIrRlR2UEpKRVMzVHhLZTFXbVg2M2NueDFtNFl0UDlkc1dSd3pcbldGcWF2VUUzTzdUQUVibk9KTHlkWUlaUXBlbXh0OXdoUE5NS01BZ2VST2tVVHEyYWJOWWxPSnNZZEVFQnFvTWZcbkZTcEZyV3Y4SFFLQmdRREZJSXpscHlWemMrWXZaRmE2S3FkcndaVHRhMno0VHFwZjROTWtzbVlMUjdIRkVwL2JcbldvbTVSSURUQTdVd29NRVVJY3RpeUdGQmhhcFlmSTlERHQrcUs4VjlwckxjNDFEdDRuQ3BrMmhLRXJtNWFFUnFcbnhzM3NkVWx5cUQrRGkrMGNVdXVWd1VaSStaZmpMMmd0NzF3UzZaMDRVVElRN3AvSnd2eng0MFcrYndLQmdRQ0Jcblo0MHVPY25yc2cycGlvMUEyQVNobHc1dUxvVkptaFBYWmVRTlFDMnBqZDF5cTR6bjNkcmdUT2ZuL0F6TkVad3pcbnYvTkZON3JSSVlmRnZaWmEvT0tkSk1ObGJWU2VzeE1aSHpTV0RaV3ArUk9sMnZUcDZXWFFuTkQ1RFdJTThYVUNcbmFYQnlGQXE1KzlFWGpybzBhZjFSOHRZT20rSlpZY3lFZksyYjFDa3ZOUUtCZ0FtTVgvaWVxdDludEpmSFB1ZXBcbmtUeERxandHejhIL3ZEK1hLR1lkNi9TQ0FiM1d1NERQWWg3elBlaFBlRVhZSzdOdkdGNEZrQlVVY2RFY2xwZVhcbmhyWkorU2NJYjFtOERqR3pJdEpkYjMza29qS2NUYnAxdVdpcC95VTFMTytmMTdqVkZTY0g3ZzVFZTM3R242bHNcbnVVbVhsTDRweUNRQk4zOHR3NEJTVlpndlxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImZpcmViYXNlLWFkbWluc2RrLXduN2lsQHNoaW5nc2hpbmctNjljMWYuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTAyMDAxNzYyNDgyMDI5NTU1OTg4IiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9maXJlYmFzZS1hZG1pbnNkay13bjdpbCU0MHNoaW5nc2hpbmctNjljMWYuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iCn0K');
/*!40000 ALTER TABLE `config` ENABLE KEYS */;
UNLOCK TABLES;

/*
*Tabla para almacenar las URL de las fotografias de los tikets
*/
CREATE TABLE `ShinShin`.`fotografias_ticket` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_ticket` INT NULL,
  `url_foto_ticket` VARCHAR(200) NULL,
  PRIMARY KEY (`id`));

ALTER TABLE `ShinShin`.`fotografias_ticket` 
ADD CONSTRAINT `fk_ticket_fotografias`
  FOREIGN KEY (`id_ticket`)
  REFERENCES `ShinShin`.`ticket` (`id_ticket`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

/*
*Almacena el token del movil del usuario
*/
ALTER TABLE `ShinShin`.`usuario` 
ADD COLUMN `device_token` VARCHAR(200) NULL AFTER `fecha_registro`;