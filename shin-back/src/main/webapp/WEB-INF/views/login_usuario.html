<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge"/>
  <title>Inicia sesión | Shing Shing</title>
  <!-- Favicon -->
  <link rel="shortcut icon" th:href="@{/resources/home/img/brands/favicon.png}" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/>
  <!-- Bootstrap core CSS -->
  <link th:href="@{/resources/home/css/bootstrap.min.css}" rel="stylesheet"/>
  <!-- Material Design Bootstrap -->
  <link th:href="@{/resources/home/css/mdb.min.css}" rel="stylesheet"/>
  <!-- Your custom styles (optional) -->
  <link th:href="@{/resources/home/css/style.css}" rel="stylesheet"/>
  <!-- Your custom styles (optional) -->
  <link th:href="@{/resources/home/css/login.css}" rel="stylesheet"/>
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css?family=Nunito:300,300i,700,900&;display=swap" rel="stylesheet"/>
  <script src="https://apis.google.com/js/api:client.js"></script>
  <script>
  var googleUser = {};
  var startApp = function() {
    gapi.load('auth2', function(){
      // Retrieve the singleton for the GoogleAuth library and set up the client.
      auth2 = gapi.auth2.init({
        client_id: '362699089953-rn4qv2qj9aosr1eic0tntpqhd0eo9q48.apps.googleusercontent.com',
        cookiepolicy: 'single_host_origin',
        // Request scopes in addition to 'profile' and 'email'
        //scope: 'additional_scope'
      });
      attachSignin(document.getElementById('customBtn'));
    });
  };

  function attachSignin(element) {
	    console.log(element.id);
	    auth2.attachClickHandler(element, {},
	        function(googleUser) {

	    	var profile = googleUser.getBasicProfile();
	        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
	        console.log('Full Name: ' + profile.getName());
	        console.log('Given Name: ' + profile.getGivenName());
	        console.log('Family Name: ' + profile.getFamilyName());
	        console.log("Image URL: " + profile.getImageUrl());
	        console.log("Email: " + profile.getEmail());

	        // The ID token you need to pass to your backend:
	        var id_token = googleUser.getAuthResponse().id_token;
	        console.log("ID Token: " + id_token);

	          document.getElementById('c1').val( profile.getId );
	          
              
	        }, function(error) {
	          alert(JSON.stringify(error, undefined, 2));
	        });
	  }
  </script>
  <!-- Imagenes -->
  <style type="text/css">
		#logo-header{
			background-image: url(../resources/home/img/brands/ss-complet.svg);
		}
		#pleca{
			background-image: url(../resources/home/img/micros/background.svg);
		}
		#footer #logo{
			background-image: url(../resources/home/img/brands/ss-complet-orange.svg);
		}
		#social #fb, .logo-fb{
			background-image: url(../resources/home/img/brands/fb.svg);
		}
		#social #tw{
			background-image: url(../resources/home/img/brands/tw.svg);
		}
		.logo-gm{
			background-image: url(../resources/home/img/brands/gm.svg);
		}
		.icon-mail{
			background-image: url(../resources/home/img/icon/mail.svg);
		}
		.icon-toggle{
			background-image: url(../resources/home/img/icon/toggle.svg);
		}
		.pico{
			background-image: url(../resources/home/img/icon/pico.svg);
		}
			@media (min-width: 768px) and (max-width: 991px) {
				#principal #imagen{
					background-image: url(../resources/home/img/micros/principal-tablet.png);
					margin-top: -40px;
				}
			}
  </style>
</head>

<body>
	<!-- Principal -->
	<div id="principal" class="section">

		<!-- Header -->
		<header>
			<div class="container">
				<a th:href="@{/portal-usuario}">
					<div class="row justify-content-between">
						<div class="col" id="logo-header"></div>
					</div>
				</a>
				</div>
		</header>

	</div>

	<div class="line-white -line"></div>

	<!-- Contenedor -->
	<div class="section">
		<!-- Content principal -->
		<div id="content-principal">
			<div class="container">
				<form  id="LoginValidation" class="form" action="user_login" method="post" th:object="${item}">
				<div class="row justify-content-center">

					<div class="col-12">
						<div class="row justify-content-center">
							<div class="input-group mb-3 col-10 col-sm-8 col-md-6 col-lg-4">
								<div class="col">
									<label class="label-default col-12">Email / Teléfono</label>
									<input type="text" class="form-control input-grey col-12" 
									placeholder="" th:field="*{username}" aria-label="Username" aria-describedby="basic-addon1" required="true"/>
								</div>
							</div>
						</div>
					</div>

					<div class="col-12">
						<div class="row justify-content-center">
							<div class="input-group mb-3 col-10 col-sm-8 col-md-6 col-lg-4">
								<div class="col">
									<label class="label-default col-12">Contraseña</label>
									<input type="password" class="form-control input-grey col-12" placeholder="" th:field="*{password}" aria-label="Username" aria-describedby="basic-addon1"
									required="true"/>
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-12">
						<div class="row justify-content-center">
                        	<div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${param.error}">
  								Email / Teléfono o contraseña incorrecta. 
  								<button type="button" class="close" data-dismiss="alert" aria-label="Close">
    								<span aria-hidden="true">&times;</span>
  								</button>
							</div>
						</div>	
					</div>

					<div class="col-10 col-sm-8 col-md-6 col-lg-4">
						<div class="row justify-content-between">
							<div class="col">
									<div class="form-group form-check col">
										<input type="checkbox" class="form-check-input check-style" id="exampleCheck1"/>
										<label class="form-check-label checkbox-style" for="exampleCheck1">Recuérdame</label>
									</div>	
							</div>
							<button type="submit" class="btn btn-primary cta-orange col">Iniciar Sesión</button>
						</div>
					</div>	

				</div>
				</form>
			</div>
			
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-10 col-sm-8 col-md-12 link-input-group" style="text-align: center;">
						<a th:href="@{/portal-usuario/restaurar/solicitar}">Olvide mi contraseña :(</a>
					</div>

					<div class="col-10 col-sm-8 col-md-8 col-lg-10 title-social-login">
						Inicia sesión con:
					</div>

					<div class="col-10 col-sm-8 col-md-6 col-lg-4">
						<div class="row justify-content-center">

							<div class="col-12 col-lg-4">
								<a href="#">
									<button class="btn-social-login bkg-fb">
										<div class="row justify-content-center cont-fb">
											<div class="logo-fb col"></div>
											<div class="col fb-style">Facebook</div>
										</div>
									</button>
								</a>
							</div>

							<div class="col-12 col-lg-4 m-16-16">
								<button class="btn-social-login bkg-grey">
										<div id="customBtn" class="row justify-content-center cont-gm">
											<div class="logo-gm col"></div>
											<div class="col gm-style">Gmail</div>
										</div>
										<div id="name"></div>
									</button>
									<input type="hidden" id="c1" name="custId" value=""/>
									<input type="hidden" id="c2" name="custId" value=""/>
									<input type="hidden" id="c3" name="custId" value=""/>
									<input type="hidden" id="c4" name="custId" value=""/>
									<input type="hidden" id="c5" name="custId" value=""/>
									<input type="hidden" id="c6" name="custId" value=""/>
									<input type="hidden" id="c7" name="custId" value=""/>
									<input type="hidden" id="c8" name="custId" value=""/>
									<input type="hidden" id="c9" name="custId" value=""/>
									<input type="hidden" id="c10" name="custId" value=""/>
							</div>

							<div class="col-12 col-lg-4">
								<a th:href="@{/portal-usuario/restaurar/crear-cuenta}">
									<button class="btn-social-login bkg-grey">
										<div class="row justify-content-center cont-mail">
											<div class="icon-mail col"></div>
											<div class="col gm-style">Tu email</div>
										</div>
									</button>
								</a>
							</div>

						</div>
					</div>

					<div class="row justify-content-center">
						<div id="footer-login" class="col-10 col-lg-6">
							<div class="row justify-content-center">
								<div class="col-12 col-sm-8 col-md-12" style="text-align: center; font-size: 13px; color: #666; margin-top: 32px; border-top: solid 1px #ccc; padding-top: 16px;">
								Si haces clic en el logo de Facebook ó Google y no eres usuario de Shing Shing, quedarás registrado y aceptarás los <a th:href="@{/legal}">Términos y Condiciones y las Política de Privacidad</a> de Shing Shing.
								</div>
							</div>
						</div>	
					</div>
				</div>
			</div>
			
		</div>
	</div>

  <!-- Start your project here-->

  <!-- SCRIPTS -->

  <!-- JQuery -->
  <script type="text/javascript" th:src="@{/resources/home/js/jquery-3.4.1.min.js}"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" th:src="@{/resources/home/js/popper.min.js}"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" th:src="@{/resources/home/js/bootstrap.min.js}"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" th:src="@{/resources/home/js/mdb.min.js}"></script>
  <script th:src="@{/resources/assets/js/plugins/jquery.validate.min.js}"></script>
	<script type="text/javascript">

	
	var theToggle = document.getElementById('toggle');

	// based on Todd Motto functions
	// https://toddmotto.com/labs/reusable-js/

	// hasClass
	function hasClass(elem, className) {
		return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
	}
	// addClass
	function addClass(elem, className) {
	    if (!hasClass(elem, className)) {
	    	elem.className += ' ' + className;
	    }
	}
	// removeClass
	function removeClass(elem, className) {
		var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, ' ') + ' ';
		if (hasClass(elem, className)) {
	        while (newClass.indexOf(' ' + className + ' ') >= 0 ) {
	            newClass = newClass.replace(' ' + className + ' ', ' ');
	        }
	        elem.className = newClass.replace(/^\s+|\s+$/g, '');
	    }
	}
	// toggleClass
	function toggleClass(elem, className) {
		var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, " " ) + ' ';
	    if (hasClass(elem, className)) {
	        while (newClass.indexOf(" " + className + " ") >= 0 ) {
	            newClass = newClass.replace( " " + className + " " , " " );
	        }
	        elem.className = newClass.replace(/^\s+|\s+$/g, '');
	    } else {
	        elem.className += ' ' + className;
	    }
	}

	

	function setFormValidation(id) {
		$(id).validate({
			rules: {
				password: {
          			required: true,
          			minlength: 8
      			},
      			username:{
      				required: true,
          		}
  			}
	      });
	}

	$(document).ready(function() {
		setFormValidation('#LoginValidation');
	});

	

	  startApp();
	  
	theToggle.onclick = function() {
		   toggleClass(this, 'on');
		   return false;
		}

	</script> 



	</body>

	</html>

