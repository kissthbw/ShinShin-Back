<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="UTF-8" />
<link rel="shortcut icon" th:href="@{/resources/home/img/brands/favicon.png}" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>Shing-Shing - Productos</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
<!--     Fonts and icons     -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet" />
<!-- CSS Files -->
<link href="https://fonts.googleapis.com/css?family=Nunito:300,700,900&;display=swap" rel="stylesheet"/>
<link th:href="@{/resources/assets/css/style-panel.css}" rel="stylesheet" />
<link th:href="@{/resources/assets/css/bootstrap.min.css}" rel="stylesheet" />
<link th:href="@{/resources/assets/colorpicker/dist/css/bootstrap-colorpicker.css}" rel="stylesheet" />
<link th:href="@{/resources/assets/css/paper-dashboard.css?v=2.0.1}" rel="stylesheet" />
<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet" /> 
<link th:href="@{/resources/assets/build/toastr.css}" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
<!-- CSS Just for demo purpose, don't include it in your project <link th:href="@{/resources/assets/demo/demo.css}" rel="stylesheet" /> -->
<link th:href="@{/resources/assets/css/style-howDo.css}"
	rel="stylesheet" />
</head>

<body class="">
	<div class="wrapper ">
		<div class="sidebar" data-color="white" data-active-color="danger">
			<!--Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"-->
			
			<div class="sidebar-wrapper">
			<div th:replace="administrador/fragments/panel::head-side-fragment(logo='panel')"></div>
				<div class="user">
					<div class="photo">
					<img th:src="${user.imgUrl} ? ${user.imgUrl} : ''" alt="..."></img>
					</div>
					<div class="info">
            			<a data-toggle="collapse" href="#collapseExample" class="collapsed">
              			<span  th:text="${user.nombre}">
                		<!-- User -->
                		<b class="caret"></b>
              			</span>
            			</a>
            			<div class="clearfix"></div>
          		</div>
				</div>

				<!-- MENU -->
				<ul class="nav">
					<!-- Las opciones del menu debe ir entre <li></li> -->
					<li class="active">
						<a data-toggle="collapse" href="#catalogos" aria-expanded="true">
							<i class="nc-icon nc-ruler-pencil"></i>
							<p>Catalogos<b class="caret"></b></p>
						</a>
						<div class="collapse show" id="catalogos">
							<ul class="nav">
								<li>
									<a th:href="@{/portal-administrador/departamento/list}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal"> Departamentos </span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/marca/list}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal"> Marcas </span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/tienda/list}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal"> Tiendas </span>
									</a>
								</li>
								
								<li class="active">
									<a th:href="@{/portal-administrador/producto/list}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal"> Productos </span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					
					<li>
						<a data-toggle="collapse" href="#bonificaciones">
							<i class="nc-icon nc-money-coins"></i>
							<p>
								Bonificaciones <b class="caret"></b>
							</p>
						</a>

						<div class="collapse" id="bonificaciones">
							<ul class="nav">
								<li>
									<a th:href="@{/portal-administrador/bonificaciones-depositos}"> <span
										class="sidebar-mini-icon">·</span> <span
										class="sidebar-normal">Retiros</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/bonificaciones-general}"> <span
										class="sidebar-mini-icon">·</span> <span
										class="sidebar-normal">General</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/bonificaciones-recargas}"> <span
										class="sidebar-mini-icon">·</span> <span
										class="sidebar-normal">Recargas</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/mediosBonificacion/list}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal"> Medios bonificacion </span>
									</a>
								</li>
							</ul>
						</div>
					</li>

					<li>
						<a data-toggle="collapse" href="#estadisticas">
							<i class="nc-icon nc-chart-bar-32"></i>
							<p>
								Estadisticas <b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="estadisticas">
							<ul class="nav">
								<li>
									<a th:href="@{/portal-administrador/estadisticas-general}">
										<span
										class="sidebar-mini-icon">·</span><span class="sidebar-normal">General</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/estadisticas-tickets}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal">Tickets</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/estadisticas-marcas}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal">Marcas</span>
									</a>
								</li>
								<li>
									<a th:href="@{/portal-administrador/estadisticas-usuarios}">
										<span class="sidebar-mini-icon">·</span>
										<span class="sidebar-normal">Usarios</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
		</div>

		<div class="main-panel">
			<nav th:replace="administrador/fragments/panel::navbarPanel-fragment(title='Catalogos')"></nav>
			<!-- <div class="panel-header"></div> -->
			<div class="content">
				<div class="row">	
					<div class="col-md-12">
					<b><h4 class="title-cat">Producto</h4></b>
						<form id="TypeValidation" class="form-horizontal" action="" th:object="${item}" method="post" enctype="multipart/form-data">
							<div class="card ">
								<div class="card-header ">
									<h4 class="card-title">Datos de Producto</h4>
								</div>
								<div class="card-body ">
									<div class="row">
										<label class="col-sm-2 col-form-label">Nombre</label>
										<div class="col-sm-7">
											<div class="form-group">
												<input class="form-control" type="text" th:field="*{nombreProducto}" name="required" required="true" />
												<input type="hidden" th:field="*{idProducto}"/>
												<input type="hidden" th:field="*{imgUrl}"/>
											</div>
										</div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Contenido</label>
										<div class="col-sm-7">
											<div class="form-group">
												<input class="form-control" type="text" th:field="*{contenido}" name="required" required="true" />
											</div>
										</div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Marca</label>
										<div class="col-sm-7">
											<div class="form-group">
												<select class="form-control"
													id="catalogoMarca.idCatalogoMarca" name="catalogoMarca.idCatalogoMarca">
													<option th:each="marca:${marcas}"
														th:value="${marca.idCatalogoMarca}"
														th:utext="${marca.nombreMarca}" 
														th:selected="*{catalogoMarca} != null ? *{catalogoMarca.idCatalogoMarca} == ${marca.idCatalogoMarca} : ''"></option>

												</select>
											</div>
										</div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Departamento</label>
										<div class="col-sm-7">
											<div class="form-group">
												<select class="form-control"
													id="catalogoTipoProducto.idCatalogoTipoProducto" name="catalogoTipoProducto.idCatalogoTipoProducto">
													<option th:each="tipo:${tipos}"
														th:value="${tipo.idCatalogoTipoProducto}"
														th:utext="${tipo.nombreTipoProducto}" 
														th:selected="*{catalogoTipoProducto} != null ? *{catalogoTipoProducto.idCatalogoTipoProducto} == ${tipo.idCatalogoTipoProducto} : ''"></option>
												</select>
											</div>
										</div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Bonificacion</label>
										<div class="col-sm-7">
											<div class="form-group">
												<input class="form-control" type="text" th:field="*{cantidadBonificacion}" />
											</div>
										</div>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Tipo</label>
										<div class="col-sm-7">
											<div class="form-group">
												<select class="form-control" th:field="*{banner}" >
													<option value="0">Seleccione una...</option>
													<option value="1">Básico</option>
													<option value="2">Popular</option>
													<option value="3">Principal</option>
												</select>
											</div>
										</div>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Color de Banner</label>
										<div class="col-sm-7">
											<div id="demo" class="input-group">
												<input class="form-control input-lg" type="text" th:field="*{colorBanner}" />
												<span class="input-group-append">
    												<span class="input-group-text colorpicker-input-addon"><i></i></span>
  												</span>
											</div>
										</div>
									</div>

									<div class="row">
										<label class="col-sm-2 col-form-label">Descripcion</label>
										<div class="col-sm-7">
											<div class="form-group">
												<textarea class="form-control" rows="3" th:field="*{descripcion}" required="true"></textarea>
											</div>

										</div>
									</div>

									<hr/>
									<div class="row">
										<label class="col-sm-2 col-form-label" style="font-weight: 900;">Imágen</label>
										<div class="col-sm-7"></div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>
									<div class="row">
											<label class="col-sm-2 col-form-label Label-on-left">Chica</label>
											<div class="col-md-4 col-sm-4">
												<div class="fileinput fileinput-new text-center" data-provides="fileinput">

	                      							<div class="fileinput-preview fileinput-exists thumbnail"></div>
	                      							<div>
	                        							<span class="btn btn-rose btn-round btn-file">
	                          								<span class="fileinput-new">Selecciona</span>
	                          								<span class="fileinput-exists">Cambiar</span>
	                          								<input type="file" name="file"/>
	                        							</span>
	                       								<a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput">
	                       									<i class="fa fa-times"></i>Eliminar</a>
	                      							</div>

	                      							<div class="fileinput-new thumbnail">
	                        							<img th:src="${item.imgUrl} ? ${item.imgUrl} : ''" alt="..." id="imgProduct"></img>
	                      							</div>
	                    						</div>
											</div>
									</div>
<!-- 
									<div class="row">
											<label class="col-sm-2 col-form-label Label-on-left">Grande</label>
											<div class="col-md-4 col-sm-4">
												<div class="fileinput fileinput-new text-center" data-provides="fileinput">
	                      							<div class="fileinput-preview fileinput-exists thumbnail"></div>
	                      							<div>
	                        							<span class="btn btn-rose btn-round btn-file">
	                          								<span class="fileinput-new">Selecciona</span>
	                          								<span class="fileinput-exists">Cambiar</span>
	                          								<input type="file" name="file" />
	                        							</span>
	                       								<a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput">
	                       									<i class="fa fa-times"></i>Eliminar</a>
	                      							</div>
	                      							<div class="fileinput-new thumbnail">
	                        							<img th:src="${item.imgUrl} ? ${item.imgUrl} : ''" alt="..."></img>
	                      							</div>
	                    						</div>
											</div>
									</div>
	 -->							
									<hr/>

									<div class="row">
										<label class="col-sm-2 col-form-label" style="font-weight: 900;">Codigos</label>
										<div class="col-sm-7"></div>
										<label class="card-sm-3 Label-on-right">
											<code>*</code>
										</label>
									</div>

									<!-- Comercial -->
									<div class="row" th:each="tienda,i:${item.tiendas}">
										<label class="col-sm-2 col-form-label" th:text="${tienda.catalogoTienda.nombreTienda}"></label>
										<div class="col-sm-7">
											<div class="form-group">
												<input class="form-control nombreTiendas" type="text" th:field="*{tiendas[__${i.index}__].productoTienda}" />
												<input type="hidden" th:field="*{tiendas[__${i.index}__].idProductoTienda}" value="*{tiendas[__${i.index}__].idProductoTienda}" />
												<input type="hidden" th:field="*{tiendas[__${i.index}__].catalogoTienda.idCatalogoTienda}" value="*{tiendas[__${i.index}__].catalogoTienda.idCatalogoTienda}" />
												<input type="hidden" th:field="*{tiendas[__${i.index}__].catalogoTienda.idCatalogoTienda}" value="*{tiendas[__${i.index}__].catalogoTienda.idCatalogoTienda}" />
												<input type="hidden" th:field="*{tiendas[__${i.index}__].catalogoTienda.nombreTienda}" value="*{tiendas[__${i.index}__].catalogoTienda.nombreTienda}" />
											</div>
										</div>
									</div>

									<div class="card-footer text-center">
									<button onclick="cancel()" class="btn btn-secundary" role="button" aria-disabled="true" id="Cancelar">Cancelar</button>
									<button onclick="del()"
									class="btn btn-secundary" role="button" aria-disabled="true" id="Eliminar">Eliminar</button>
									<button class="btn btn-primary" type="submit" id="Guardar" onclick="confirm()">Guardar</button>
											
									<br></br>
									<div class="etiendas" style="display:none;"><p class="text-danger">Debe agregar al menos un codigo.</p></div>
									
									<div class="errores" style="display:none;"><p class="text-danger">Verifique que los campos esten llenados corrrectamente...!!</p></div>
											
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<!-- Modal -->
			
<!-- Modal -->
			<div class="modal fade right" id="modalCancel" tabindex="-1" role="dialog" aria-labelledby="exampleModalPreviewLabel" aria-hidden="true">
			  <div class="modal-dialog" role="document" >
			    <div class="modal-content" style="border-radius:20px;">
			      <div class="modal-body" style="text-align:center;">
			        <h1>
			         <i class="fa fa-bell-o" aria-hidden="true"></i>
			        </h1>
			        <h3>
			          Aún no agregas el producto
			        </h3>
			        <p>
			          ¿Seguro que quieres salir de aqui?
			        </p>
			      </div>
			      <div class="modal-footer" style="text-align:center; display:inline-block; border:none; padding-bottom: 25px;">
			        <button type="button" class="btn btn-secundary" data-dismiss="modal">No, Cancelar</button>
			        <a class="btn btn-primary" th:href="@{/portal-administrador/producto/list}">Si, Salir</a>
			        <br></br>
			      </div>
			    </div>
			  </div>
			</div>
			<!-- Modal -->
			
			<div class="modal fade right" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalPreviewLabel" aria-hidden="true">
			  <div class="modal-dialog" role="document" >
			    <div class="modal-content" style="border-radius:20px;">
			      <div class="modal-body" style="text-align:center;">
			        <h1>
			         <i class="fa fa-bell-o" aria-hidden="true"></i>
			        </h1>
			        <h3>
			          Eliminar producto
			        </h3>
			        <p>
			          ¿Seguro que quieres eliminar este producto?
			        </p>
			      </div>
			      <div class="modal-footer" style="text-align:center; display:inline-block; border:none; padding-bottom: 25px;">
			        <button type="button" class="btn btn-secundary" data-dismiss="modal">No, Cancelar</button>
			        <a class="btn btn-primary" th:href="@{'/portal-administrador/producto/delete/' + ${item.idProducto}}">Si, Eliminar</a>
			        <br></br>
			      </div>
			    </div>
			  </div>
			</div>
			<!-- Modal -->
			<footer class="footer footer-black  footer-white ">
				<div class="container-fluid">
					<div class="row">
						

						<div th:replace="administrador/fragments/form-reporte-problema::form-reporte-problema"></div>
						<nav class="footer-nav">




							<ul>
								<!-- <li><a href="https://www.creative-tim.com" target="_blank">Creative Tim</a></li>
								<li><a href="http://blog.creative-tim.com/" target="_blank">Blog</a></li>
								<li><a href="https://www.creative-tim.com/license" target="_blank">Licenses</a></li>
								-->
							</ul>
						</nav>
						<div class="credits ml-auto">
							<!-- <span class="copyright"> © <script> document.write(new Date().getFullYear())
								</script>, made with <i class="fa fa-heart heart"></i> by Creative Tim
							</span>
							-->
						</div>
					</div>
				</div>
			</footer>
		</div>
	</div>
	<!--   Core JS Files   -->
	<script th:src="@{/resources/assets/js/core/jquery.min.js}"></script>
	<script th:src="@{/resources/assets/js/core/popper.min.js}"></script>
	<script th:src="@{/resources/assets/js/core/bootstrap.min.js}"></script>
	<script th:src="@{/resources/assets/js/plugins/perfect-scrollbar.jquery.min.js}"></script>
	<script th:src="@{/resources/assets/js/plugins/moment.min.js}"></script>
	<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
	<script th:src="@{/resources/assets/js/plugins/bootstrap-switch.js}"></script>
	<!--  Plugin for Sweet Alert -->
	<script th:src="@{/resources/assets/js/plugins/sweetalert2.min.js}"></script>
	<!-- Forms Validations Plugin -->
	<script th:src="@{/resources/assets/js/plugins/jquery.validate.min.js}"></script>
	<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
	<script th:src="@{/resources/assets/js/plugins/jquery.bootstrap-wizard.js}"></script>
	<!--  Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
	<script th:src="@{/resources/assets/js/plugins/bootstrap-selectpicker.js}"></script>
	<!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
	<script th:src="@{/resources/assets/js/plugins/bootstrap-datetimepicker.js}"></script>
	<!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
	<script th:src="@{/resources/assets/js/plugins/jquery.dataTables.min.js}"></script>
	<!--  Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap		-tagsinputs  -->
	<script th:src="@{/resources/assets/js/plugins/bootstrap-tagsinput.js}"></script>
	<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
	<script th:src="@{/resources/assets/js/plugins/jasny-bootstrap.min.js}"></script>
	<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
	<script th:src="@{/resources/assets/js/plugins/fullcalendar.min.js}"></script>
	<!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
	<script th:src="@{/resources/assets/js/plugins/jquery-jvectormap.js}"></script>
	<!--  Plugin for the Bootstrap Table -->
	<script th:src="@{/resources/assets/js/plugins/nouislider.min.js}"></script>
	<!--  Google Maps Plugin    -->
	<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
	<!-- Chart JS -->
	<script th:src="@{/resources/assets/js/plugins/chartjs.min.js}"></script>
	<!--  Notifications Plugin    -->
	<script th:src="@{/resources/assets/js/plugins/bootstrap-notify.js}"></script>
	<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
	<script th:src="@{/resources/assets/js/paper-dashboard.min.js?v=2.0.1}" type="text/javascript"></script>
	<!-- Paper Dashboard DEMO methods, don't include it in your project! -->
	<script th:src="@{/resources/assets/demo/demo.js}"></script>
	<script th:src="@{/resources/assets/colorpicker/dist/js/bootstrap-colorpicker.js}"></script> 	<script th:src="@{/resources/assets/build/toastr.min.js}"></script>
	 <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js" type="text/javascript"></script>
	<script>
	  //<![CDATA[
	document.getElementById("TypeValidation").addEventListener("submit", submit);
	$(window).on("load",function(){
	
		var URLactual = window.location;
		//alert(URLactual);
		if(String(URLactual).indexOf("save")==-1){
			document.getElementById("Cancelar").style.display="none";
		}else{
			document.getElementById("Eliminar").style.display="none";
		}
		
	});
	function cancel(){
		$("#modalCancel").modal();
	}
	function submit(e) {
		// Cancelams el envio a la espera de que valide el formulario
		e.preventDefault();
	
		
	}
	
	function confirm(){
		/*
		swal({
			  title: "¡Atencion!",
			  text: "Confirme para guardar los cambios.",
			  icon: "warning",
			  buttons: true,
			  dangerMode: true,
			})
			.then((willDelete) => {
			  if (willDelete) {
				  document.getElementById("TypeValidation").submit();
			  } else {
			    swal.close();
			  }
			});*/
			
			if($("#TypeValidation").valid()){
				var tiendas=document.getElementsByClassName("nombreTiendas");
				console.log(tiendas);
				var i=0;
				var bind=0;	   
			  
				var len=tiendas.length;
				for(i=0;i<len;i++){
					if(tiendas[i].value!=""){
						bind=1;
						break
					}
				}
				  
				if(bind==1) {
					 document.getElementById("TypeValidation").submit();
				}else{
					$(".etiendas").css("display","block");
					$(".nombreTiendas").removeClass(
					'has-success').addClass('has-danger');
				}			
					
				
			}else{
				//alert("Llene los campos restantes :(");
					$(".etiendas").css("display","none");
				$(".errores").css("display","block");
			}
		
		
	}
	
	function del(){
		$("#modalConfirm").modal();
	}
	
		function setFormValidation(id) {
			
			$(id).validate(
					{
						highlight : function(element) {
							$(element).closest('.form-group').removeClass(
									'has-success').addClass('has-danger');
							$(element).closest('.form-check').removeClass(
									'has-success').addClass('has-danger');
						},
						success : function(element) {
							$(element).closest('.form-group').removeClass(
									'has-danger').addClass('has-success');
							$(element).closest('.form-check').removeClass(
									'has-danger').addClass('has-success');
						},
						errorPlacement : function(error, element) {
							$(element).closest('.form-group').append(error);
						},
					});
		}

		$(document).ready(function() {
			setFormValidation('#RegisterValidation');
			setFormValidation('#TypeValidation');
			setFormValidation('#LoginValidation');
			setFormValidation('#RangeValidation');
			
		});

		$(function () {
			var color=$("#colorBanner").val();
			color=color.replace("rgb(","");
			color=color.replace(")","");
		    $('#demo').colorpicker({
		      useAlpha: false,
		      color: color
		    });
		  });
		//]]>
	</script>

</body>
</html>
 <script th:src="@{/resources/assets/build/toastr.min.js}"></script>
<script th:replace="administrador/fragments/form-reporte-problema::script-reporte-problema"></script>
<script th:replace="administrador/fragments/toast::toast-config"></script>